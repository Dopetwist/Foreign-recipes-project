<%- include("partials/header.ejs") %>

    <main>
        <% if (locals.category) { %> 
            <a href="/category-search"><i class='bx bx-arrow-back back-arrow'></i></a>
        <% } else if (locals.area) { %> 
            <a href="/area-search"><i class='bx bx-arrow-back back-arrow'></i></a>
        <% } else { %>
            <a href="/letter-search"><i class='bx bx-arrow-back back-arrow'></i></a>
        <% } %>

        <div class="outter-container" id="srch-con">
            <% if (locals.message) { %> 
                <p class="err-msg err-margin2"> <%= message %> </p>
            <% } %>
            
            <div class="container sub-con">
                <div class="recipe-display">

                    <!-- Displaying all the recipes under a selected Category or Area -->
                    <% if (locals.apiData) { %> 
        
                        <h2>Recipes:</h2>
        
                        <% apiData.meals.forEach((item) => { %> 
                            <ul>
                                <li>
                                    <% if (locals.category) { %> 
                                        <a href="/meal/<%= item.idMeal %>?currentPage=recipes&category=<%= category %>"> <%= item.strMeal %> </a>
                                    <% } else if (locals.area) { %>
                                        <a href="/meal/<%= item.idMeal %>?currentPage=recipes&area=<%= area %>"> <%= item.strMeal %> </a>
                                    <% } else { %> 
                                        <a href="/meal/<%= item.idMeal %>?currentPage=letterPage"> <%= item.strMeal %> </a>
                                    <% } %>
                                </li>
                            </ul>
                        <% }); %>
                    <% } %>
                </div>
            </div>
        </div>
    </main>

<%- include("partials/footer.ejs") %>
